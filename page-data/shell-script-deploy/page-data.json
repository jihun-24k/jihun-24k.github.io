{"componentChunkName":"component---src-pages-contentful-post-slug-tsx","path":"/shell-script-deploy/","result":{"data":{"contentfulPost":{"title":"쉘 스크립트로 자동 배포","category":["LINUX"],"date":"2024-09-17","slug":"shell-script-deploy","thumbnail":{"url":"https://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=125&h=119&q=50&fm=webp 125w,\nhttps://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=250&h=237&q=50&fm=webp 250w,\nhttps://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=500&h=474&q=50&fm=webp 500w","sizes":"(min-width: 500px) 500px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=500&h=474&q=50&fm=png","srcSet":"https://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=125&h=119&q=50&fm=png 125w,\nhttps://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=250&h=237&q=50&fm=png 250w,\nhttps://images.ctfassets.net/w6wmczdusxy8/41n9NZb83uhFkWVTpj4I9B/ab7bb35bc5a99571e2825749e5c60c12/___________2024-09-16______5.13.51.png?w=500&h=474&q=50&fm=png 500w","sizes":"(min-width: 500px) 500px, 100vw"}},"layout":"constrained","backgroundColor":"#f8f8f8","width":1000,"height":948}},"description":{"description":"수동으로 배포를 해봄으로써 쉘 스크립트를 사용 해야하는 이유를 느껴보자. 또한 스크립트를 직접 작성해 자동 배포 과정을 정리한 글"},"content":{"raw":"{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"원격 서버에 자바 웹 애플리케이션을 배포하고자 한다. war 파일을 만들어 배포하는 방법과 디렉토리 자체를 배포하는 두 가지 방법이 있다. 여기 실습에선 톰캣에 디렉토리 자체를 배포하는 방식을 사용했다. 직접 배포를 해보면서 불편함을 해결하는 과정을 정리했다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"수동으로 배포\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-2\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"git clone으로 github 저장소를 clone한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"배포할 브랜치를 변경한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"배포할 디렉토리에서 mvn clean package로 프로젝트를 빌드한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"톰캣 루트 디렉토리 ROOT를 삭제한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"배포할 프로젝트 내부의 target에서 빌드된 프로젝트명 파일을 ROOT로 이동한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"startup.sh을 실행시켜 서버를 시작한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"서버ip:8080을 브라우저로 접속해 확인한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"}],\"nodeType\":\"unordered-list\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"수동 배포의 불편함\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-3\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"일련의 배포 과정을 살펴보면 불편함을 볼 수 있다. 바로 배포 때마다 앞선 과정들을 반복 해야한다. 하나의 과정이라도 실수 하면 실수하는 대로 시간과 인적 자원이 낭비된다. 이런 반복되는 과정을 자동으로 처리해 줄 수 있는 쉘 스크립트로 해결해보자.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘 스크립트란?\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-2\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"유닉스 또는 리눅스 운영 체제에서 쉘(Shell)이라는 명령어 해석기를 사용하여 실행할 수 있는 일련의 명령어를 작성한 스크립트 파일이다. 쉘 스크립트는 시스템 관리, 프로세스 자동화, 애플리케이션 배포, 데이터 백업 등 다양한 작업을 자동화하는 데 사용된다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘에서 실행할 수 있는 명령어들을 하나의 파일에 작성한 것이 쉘 스크립트다. 파일 확장자는 일반적으로 .sh를 사용한다. 예시로 앞서 톰캣을 실행할 때 사용된 startup.sh 도 톰캣의 실행에 필요한 명령어들을 한 파일에 작성한 것이다. 쉘 스크립트는 명령어의 조합, 변수 사용, 제어 흐름(조건문, 반복문 등) 등을 포함해 복잡한 작업을 자동화할 수 있다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘 스크립트 기본 구조\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-3\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"bold\"}],\"value\":\"해시뱅(Shebang) 선언\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"스크립트의 첫 번째 줄은 보통 #!로 시작하는 해시뱅(Shebang)으로, 스크립트를 실행할 셸의 경로를 지정한다. 아래의 예시는 Bash 쉘을 사용하여 스크립트를 실행하도록 지정한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"code\"}],\"value\":\"language::shell\\n#!/bin/bash\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"bold\"}],\"value\":\"명령어 작성\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"셸 명령어를 순서대로 작성한다. 예시로 만든 쉘 스크립트를 실행하게 되면 Hello World가 출력된다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"code\"}],\"value\":\"language::shell\\n#!/bin/bash\\necho \\\"Hello, World!\\\"\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"}],\"nodeType\":\"ordered-list\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘 스크립트로 자동 배포\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-2\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"수동으로 했던 배포과정을 쉘 스크립트로 작성해 자동으로 배포해보자.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"계정 Home 디렉토리 deploy.sh 파일을 만들어 쉘 스크립트를 작성한다.\\n\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{\"target\":{\"sys\":{\"id\":\"FSY7HWHHbr9Mo8RMHAfMV\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[],\"nodeType\":\"embedded-asset-block\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"배포할 프로젝트 경로를 변수로 설정\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"git pull을 활용해 배포할 프로젝트 가져오기\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"ROOT 디렉토리 삭제 및 대체\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"톰캣 실행\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"}],\"nodeType\":\"unordered-list\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘 스크립트 파일에 실행 권한을 부여한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"code\"}],\"value\":\"language::shell\\nchmod 755 deploy.sh\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"쉘 스크립트 파일을 실행한다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[{\"type\":\"code\"}],\"value\":\"language::shell\\n./deploy.sh\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{\"target\":{\"sys\":{\"id\":\"6Oze5EZE6T3xdj0tbOHAvf\",\"type\":\"Link\",\"linkType\":\"Asset\"}}},\"content\":[],\"nodeType\":\"embedded-asset-block\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"자동으로 톰캣 재시동 및 프로젝트 빌드 해주는 것을 확인 할 수 있다.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"}],\"nodeType\":\"ordered-list\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"마무리\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-2\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"CI/CD 과정의 기본이라고 할 수 있다. 결국 쉘 파일을 여러개 자동으로 처리하는 과정이기 때문이다. 직접 쉘 스크립트를 작성하고 이용하면서 깨달을 수 있었다. 반복되는 작업을 사람이 하다보면 실수, 즉 휴먼 에러가 발생하기 마련이다. 쉘 스크립트 작성을 틈틈이 하면서 반복작업을 줄여보자.\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"참고 자료\",\"nodeType\":\"text\"}],\"nodeType\":\"heading-2\"},{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"박재성, 자바 웹 프로그래밍 Next Step, 로드북, 2016\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"list-item\"}],\"nodeType\":\"unordered-list\"},{\"data\":{},\"content\":[{\"data\":{},\"marks\":[],\"value\":\"\",\"nodeType\":\"text\"}],\"nodeType\":\"paragraph\"}],\"nodeType\":\"document\"}","references":[{"contentful_id":"FSY7HWHHbr9Mo8RMHAfMV","title":"deploy.sh 작성","description":"수동으로 배포할 때 작성한 명령어를 하나의 파일에 작성","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=192&h=76&q=50&fm=webp 192w,\nhttps://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=384&h=152&q=50&fm=webp 384w,\nhttps://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=768&h=303&q=50&fm=webp 768w","sizes":"(min-width: 768px) 768px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=768&h=303&q=50&fm=png","srcSet":"https://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=192&h=76&q=50&fm=png 192w,\nhttps://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=384&h=152&q=50&fm=png 384w,\nhttps://images.ctfassets.net/w6wmczdusxy8/FSY7HWHHbr9Mo8RMHAfMV/22660ff0887095867c81f89d557c1834/___________2024-09-16______5.00.45.png?w=768&h=303&q=50&fm=png 768w","sizes":"(min-width: 768px) 768px, 100vw"}},"layout":"constrained","backgroundColor":"#081818","width":768,"height":303},"__typename":"ContentfulAsset"},{"contentful_id":"6Oze5EZE6T3xdj0tbOHAvf","title":"쉘 스크립트 완료","description":"","gatsbyImageData":{"images":{"sources":[{"srcSet":"https://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=192&h=66&q=50&fm=webp 192w,\nhttps://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=384&h=132&q=50&fm=webp 384w,\nhttps://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=768&h=264&q=50&fm=webp 768w","sizes":"(min-width: 768px) 768px, 100vw","type":"image/webp"}],"fallback":{"src":"https://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=768&h=264&q=50&fm=png","srcSet":"https://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=192&h=66&q=50&fm=png 192w,\nhttps://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=384&h=132&q=50&fm=png 384w,\nhttps://images.ctfassets.net/w6wmczdusxy8/6Oze5EZE6T3xdj0tbOHAvf/22e0f6169e82aff48ad27c5204fc2d0a/___________2024-09-16______5.04.24.png?w=768&h=264&q=50&fm=png 768w","sizes":"(min-width: 768px) 768px, 100vw"}},"layout":"constrained","backgroundColor":"#081818","width":768,"height":264},"__typename":"ContentfulAsset"}]}}},"pageContext":{"id":"1a91fd1a-1f06-552f-9437-a17aef4794ab","slug":"shell-script-deploy","__params":{"slug":"shell-script-deploy"}}},"staticQueryHashes":["506648845"],"slicesMap":{}}